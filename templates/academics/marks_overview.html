{% extends "base.html" %}
{% block title %}Marks Overview - Academic Management{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="page-title">
        <i class="fas fa-chart-line me-2"></i>Marks Overview
    </h1>
    {% if user_role == 'FACULTY' %}
    <a class="btn btn-custom-primary" href="{% url 'academics:marks_create' %}">
        <i class="fas fa-plus me-2"></i>Add Mark
    </a>
    {% endif %}
</div>

<div class="table-responsive">
    <table class="table table-custom">
        <thead>
            <tr>
                <th><i class="fas fa-user me-2"></i>Student</th>
                <th><i class="fas fa-book me-2"></i>Subject</th>
                <th><i class="fas fa-clipboard-list me-2"></i>Assessment</th>
                <th><i class="fas fa-star me-2"></i>Score</th>
                <th><i class="fas fa-trophy me-2"></i>Max</th>
                <th><i class="fas fa-clock me-2"></i>Recorded</th>
                {% if user_role == 'FACULTY' %}
                <th><i class="fas fa-cog me-2"></i>Actions</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% for mark in marks %}
            <tr>
                <td>{{ mark.student }}</td>
                <td><strong>{{ mark.subject }}</strong></td>
                <td><span class="badge bg-info">{{ mark.get_assessment_type_display }}</span></td>
                <td><strong class="text-primary">{{ mark.score }}</strong></td>
                <td>{{ mark.max_score }}</td>
                <td><small class="text-muted">{{ mark.recorded_at|date:"M d, Y H:i" }}</small></td>
                {% if user_role == 'FACULTY' %}
                <td>
                    <a href="{% url 'academics:marks_edit' mark.pk %}" class="btn btn-sm btn-warning btn-action me-1">
                        <i class="fas fa-edit"></i>
                    </a>
                    <a href="{% url 'academics:marks_delete' mark.pk %}" class="btn btn-sm btn-danger btn-action">
                        <i class="fas fa-trash"></i>
                    </a>
                </td>
                {% endif %}
            </tr>
            {% empty %}
            <tr>
                <td colspan="{% if user_role == 'FACULTY' %}7{% else %}6{% endif %}" class="text-center py-5">
                    <i class="fas fa-chart-bar fa-3x text-muted mb-3"></i>
                    <p class="text-muted">No marks recorded yet.</p>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
